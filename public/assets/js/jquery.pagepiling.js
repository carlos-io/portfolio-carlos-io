!function(P,Y,N,q){"use strict";P.fn.pagepiling=function(e){var v,i=P.fn.pagepiling,a=P(this),h=0,n="ontouchstart"in N||0<navigator.msMaxTouchPoints||navigator.maxTouchPoints,s=0,c=0,r=0,l=0,p=[],t=600,u=P.extend(!0,{direction:"vertical",menu:null,verticalCentered:!0,sectionsColor:[],anchors:[],scrollingSpeed:700,easing:"easeInQuart",loopBottom:!1,loopTop:!1,css3:!0,navigation:{textColor:"#000",bulletsColor:"#000",position:"right",tooltips:[]},normalScrollElements:null,normalScrollElementTouchThreshold:5,touchSensitivity:5,keyboardScrolling:!0,sectionSelector:".section",animateAnchor:!1,afterLoad:null,onLeave:null,afterRender:null},e);P.extend(P.easing,{easeInQuart:function(e,n,t,o,i){return o*(n/=i)*n*n*n+t}}),i.setScrollingSpeed=function(e){u.scrollingSpeed=e},i.setMouseWheelScrolling=function(e){e?a.get(0).addEventListener?(a.get(0).addEventListener("mousewheel",M,!1),a.get(0).addEventListener("wheel",M,!1)):a.get(0).attachEvent("onmousewheel",M):a.get(0).addEventListener?(a.get(0).removeEventListener("mousewheel",M,!1),a.get(0).removeEventListener("wheel",M,!1)):a.get(0).detachEvent("onmousewheel",M)},i.setAllowScrolling=function(e){e?(i.setMouseWheelScrolling(!0),function(){if(n){var e=k();a.off("touchstart "+e.down).on("touchstart "+e.down,D),a.off("touchmove "+e.move).on("touchmove "+e.move,I)}}()):(i.setMouseWheelScrolling(!1),function(){if(n){var e=k();a.off("touchstart "+e.down),a.off("touchmove "+e.move)}}())},i.setKeyboardScrolling=function(e){u.keyboardScrolling=e},i.moveSectionUp=function(){var e=P(".pp-section.active").prev(".pp-section");!e.length&&u.loopTop&&(e=P(".pp-section").last()),e.length&&d(e)},i.moveSectionDown=function(){var e=P(".pp-section.active").next(".pp-section");!e.length&&u.loopBottom&&(e=P(".pp-section").first()),e.length&&d(e)},i.moveTo=function(e){var n="";0<(n=isNaN(e)?P(Y).find('[data-anchor="'+e+'"]'):P(".pp-section").eq(e-1)).length&&d(n)},P(u.sectionSelector).each(function(){P(this).addClass("pp-section")}),u.css3&&(u.css3=function(){var e,n=Y.createElement("p"),t={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var o in Y.body.insertBefore(n,null),t)n.style[o]!==q&&(n.style[o]="translate3d(1px,1px,1px)",e=N.getComputedStyle(n).getPropertyValue(t[o]));return Y.body.removeChild(n),e!==q&&0<e.length&&"none"!==e}()),P(a).css({overflow:"hidden","-ms-touch-action":"none","touch-action":"none"}),i.setAllowScrolling(!0),P.isEmptyObject(u.navigation)||function(){P("body").append('<div id="pp-nav"><ul></ul></div>');var e=P("#pp-nav");e.css("color",u.navigation.textColor),e.addClass(u.navigation.position);for(var n=0;n<P(".pp-section").length;n++){var t="";if(u.anchors.length&&(t=u.anchors[n]),"undefined"!==u.navigation.tooltips){var o=u.navigation.tooltips[n];void 0===o&&(o="")}e.find("ul").append('<li data-tooltip="'+o+'"><a href="#'+t+'"><span></span></a></li>')}e.find("span").css("border-color",u.navigation.bulletsColor)}();var o=P(".pp-section").length;function d(e,n){var t,o,i={destination:e,animated:n,activeSection:P(".pp-section.active"),anchorLink:e.data("anchor"),sectionIndex:e.index(".pp-section"),toMove:e,yMovement:(t=e,o=P(".pp-section.active").index(".pp-section"),t.index(".pp-section")<o?"up":"down"),leavingSection:P(".pp-section.active").index(".pp-section")+1};if(!i.activeSection.is(e)){var a,s,c,r,l,p;void 0===i.animated&&(i.animated=!0),void 0!==i.anchorLink&&(a=i.anchorLink,s=i.sectionIndex,u.anchors.length?(location.hash=a,S(location.hash)):S(String(s))),i.destination.addClass("active").siblings().removeClass("active"),i.sectionsToMove=function(n){var e;e="down"===n.yMovement?P(".pp-section").map(function(e){if(e<n.destination.index(".pp-section"))return P(this)}):P(".pp-section").map(function(e){if(e>n.destination.index(".pp-section"))return P(this)});return e}(i),"down"===i.yMovement?(i.translate3d=X(),i.scrolling="-100%",u.css3||i.sectionsToMove.each(function(e){e!=i.activeSection.index(".pp-section")&&P(this).css(g(i.scrolling))}),i.animateSection=i.activeSection):(i.translate3d="translate3d(0px, 0px, 0px)",i.scrolling="0",i.animateSection=e),P.isFunction(u.onLeave)&&u.onLeave.call(this,i.leavingSection,i.sectionIndex+1,i.yMovement),c=i,u.css3?(b(c.animateSection,c.translate3d,c.animated),c.sectionsToMove.each(function(){b(P(this),c.translate3d,c.animated)}),setTimeout(function(){f(c)},u.scrollingSpeed)):(c.scrollOptions=g(c.scrolling),c.animated?c.animateSection.animate(c.scrollOptions,u.scrollingSpeed,u.easing,function(){m(c),f(c)}):(c.animateSection.css(g(c.scrolling)),setTimeout(function(){m(c),f(c)},400))),r=i.anchorLink,u.menu&&(P(u.menu).find(".active").removeClass("active"),P(u.menu).find('[data-menuanchor="'+r+'"]').addClass("active")),l=i.anchorLink,p=i.sectionIndex,u.navigation&&(P("#pp-nav").find(".active").removeClass("active"),l?P("#pp-nav").find('a[href="#'+l+'"]').addClass("active"):P("#pp-nav").find("li").eq(p).find("a").addClass("active")),v=i.anchorLink;var d=(new Date).getTime();h=d}}function f(e){P.isFunction(u.afterLoad)&&u.afterLoad.call(this,e.anchorLink,e.sectionIndex+1)}function m(n){"up"===n.yMovement&&n.sectionsToMove.each(function(e){P(this).css(g(n.scrolling))})}function g(e){return"vertical"===u.direction?{top:e}:{left:e}}function S(e){e=e.replace("#",""),P("body")[0].className=P("body")[0].className.replace(/\b\s?pp-viewing-[^\s]+\b/g,""),P("body").addClass("pp-viewing-"+e)}function w(){return(new Date).getTime()-h<t+u.scrollingSpeed}function b(e,n,t){var o;e.toggleClass("pp-easing",t),e.css({"-webkit-transform":o=n,"-moz-transform":o,"-ms-transform":o,transform:o})}P(".pp-section").each(function(e){P(this).data("data-index",e),P(this).css("z-index",o),e||0!==P(".pp-section.active").length||P(this).addClass("active"),void 0!==u.anchors[e]&&P(this).attr("data-anchor",u.anchors[e]),void 0!==u.sectionsColor[e]&&P(this).css("background-color",u.sectionsColor[e]),u.verticalCentered&&!P(this).hasClass("pp-scrollable")&&P(this).addClass("pp-table").wrapInner('<div class="pp-tableCell" style="height:100%" />'),--o}).promise().done(function(){u.navigation&&(P("#pp-nav").css("margin-top","-"+P("#pp-nav").height()/2+"px"),P("#pp-nav").find("li").eq(P(".pp-section.active").index(".pp-section")).find("a").addClass("active")),P(N).on("load",function(){var e,n;e=N.location.hash.replace("#",""),0<(n=P(Y).find('.pp-section[data-anchor="'+e+'"]')).length&&d(n,u.animateAnchor)}),P.isFunction(u.afterRender)&&u.afterRender.call(this)}),P(N).on("hashchange",function(){var e=N.location.hash.replace("#","").split("/")[0];if(e.length){if(e&&e!==v)d(isNaN(e)?P(Y).find('[data-anchor="'+e+'"]'):P(".pp-section").eq(e-1))}}),P(Y).keydown(function(e){if(u.keyboardScrolling&&!w())switch(e.which){case 38:case 33:i.moveSectionUp();break;case 40:case 34:i.moveSectionDown();break;case 36:i.moveTo(1);break;case 35:i.moveTo(P(".pp-section").length);break;case 37:i.moveSectionUp();break;case 39:i.moveSectionDown();break;default:return}}),u.normalScrollElements&&(P(Y).on("mouseenter",u.normalScrollElements,function(){i.setMouseWheelScrolling(!1)}),P(Y).on("mouseleave",u.normalScrollElements,function(){i.setMouseWheelScrolling(!0)}));var x=(new Date).getTime();function M(e){var n=(new Date).getTime(),t=(e=e||N.event).wheelDelta||-e.deltaY||-e.detail,o=Math.max(-1,Math.min(1,t)),i=void 0!==e.wheelDeltaX||void 0!==e.deltaX,a=Math.abs(e.wheelDeltaX)<Math.abs(e.wheelDelta)||Math.abs(e.deltaX)<Math.abs(e.deltaY)||!i;149<p.length&&p.shift(),p.push(Math.abs(t));var s=n-x;if(x=n,200<s&&(p=[]),!w()){var c=C(P(".pp-section.active")),r=y(p,10);return y(p,70)<=r&&a&&(o<0?T("down",c):0<o&&T("up",c)),!1}}function y(e,n){for(var t=0,o=e.slice(Math.max(e.length-n,1)),i=0;i<o.length;i++)t+=o[i];return Math.ceil(t/n)}function T(e,n){var t,o;if(o="down"==e?(t="bottom",i.moveSectionDown):(t="top",i.moveSectionUp),0<n.length){if(!function(e,n){{if("top"===e)return!n.scrollTop();if("bottom"===e)return n.scrollTop()+1+n.innerHeight()>=n[0].scrollHeight}}(t,n))return 1;o()}else o()}function C(e){return e.filter(".pp-scrollable")}function k(){return N.PointerEvent?{down:"pointerdown",move:"pointermove",up:"pointerup"}:{down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp"}}function E(e){var n=new Array;return n.y=void 0!==e.pageY&&(e.pageY||e.pageX)?e.pageY:e.touches[0].pageY,n.x=void 0!==e.pageX&&(e.pageY||e.pageX)?e.pageX:e.touches[0].pageX,n}function L(e){return void 0===e.pointerType||"mouse"!=e.pointerType}function D(e){var n=e.originalEvent;if(L(n)){var t=E(n);s=t.y,c=t.x}}function I(e){var n=e.originalEvent;if(!function e(n,t){t=t||0;var o=P(n).parent();return!!(t<u.normalScrollElementTouchThreshold&&o.is(u.normalScrollElements))||t!=u.normalScrollElementTouchThreshold&&e(o,++t)}(e.target)&&L(n)){var t=C(P(".pp-section.active"));if(t.length||e.preventDefault(),!w()){var o=E(n);r=o.y,l=o.x,"horizontal"===u.direction&&Math.abs(c-l)>Math.abs(s-r)?Math.abs(c-l)>a.width()/100*u.touchSensitivity&&(l<c?T("down",t):c<l&&T("up",t)):Math.abs(s-r)>a.height()/100*u.touchSensitivity&&(r<s?T("down",t):s<r&&T("up",t))}}}function X(){return"vertical"!==u.direction?"translate3d(-100%, 0px, 0px)":"translate3d(0px, -100%, 0px)"}P(Y).on("click touchstart","#pp-nav a",function(e){e.preventDefault();var n=P(this).parent().index();d(P(".pp-section").eq(n))}),P(Y).on({mouseenter:function(){var e=P(this).data("tooltip");P('<div class="pp-tooltip '+u.navigation.position+'">'+e+"</div>").hide().appendTo(P(this)).fadeIn(200)},mouseleave:function(){P(this).find(".pp-tooltip").fadeOut(200,function(){P(this).remove()})}},"#pp-nav li")}}(jQuery,document,window);